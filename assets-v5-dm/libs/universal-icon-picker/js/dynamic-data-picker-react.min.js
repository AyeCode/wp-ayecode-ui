(function(wp){if(!wp.element)return;const{createElement,useState,useMemo,Fragment,createPortal}=wp.element;window.sdDynamicData=window.sdDynamicData||{};Object.assign(window.sdDynamicData,{post:{label:"Post",tags:[{label:"Post Title",tag:"{post_title}"},{label:"Post ID",tag:"{post_id}"},{label:"Post URL",tag:"{post_url}"},{label:"Post Slug",tag:"{post_slug}"},{label:"Post Content",tag:"{post_content}"},{label:"Post Excerpt",tag:"{post_excerpt}"},{label:"Post Date",tag:"{post_date}"},{label:"Post Modified Date",tag:"{post_modified_date}"},{label:"Post Status",tag:"{post_status}"},{label:"Post Type",tag:"{post_type}"},{label:"Comment Count",tag:"{comment_count}"},{label:"Comments Link",tag:"{comments_link}"},{label:"Post Terms (e.g., Categories)",tag:"{post_terms:category}"}]},featured_image:{label:"Featured Image",tags:[{label:"Image URL",tag:"{featured_image_url}"},{label:"Image ID",tag:"{featured_image_id}"},{label:"Alt Text",tag:"{featured_image_alt}"},{label:"Title",tag:"{featured_image_title}"},{label:"Caption",tag:"{featured_image_caption}"}]},author:{label:"Post Author",tags:[{label:"Author Name",tag:"{author_name}"},{label:"Author ID",tag:"{author_id}"},{label:"Author Email",tag:"{author_email}"},{label:"Author Bio",tag:"{author_bio}"},{label:"Author Website",tag:"{author_website}"},{label:"Author Posts URL",tag:"{author_url}"},{label:"Author Profile Picture URL",tag:"{author_profile_picture_url}"}]},user:{label:"Current User",tags:[{label:"Display Name",tag:"{user_display_name}"},{label:"User ID",tag:"{user_id}"},{label:"Email",tag:"{user_email}"},{label:"First Name",tag:"{user_first_name}"},{label:"Last Name",tag:"{user_last_name}"},{label:"Website",tag:"{user_website}"},{label:"Profile Picture URL",tag:"{user_profile_picture_url}"}]},archive:{label:"Archive & Term",tags:[{label:"Archive Title",tag:"{archive_title}"},{label:"Archive Description",tag:"{archive_description}"},{label:"Archive URL",tag:"{archive_url}"},{label:"Term Name",tag:"{term_name}"},{label:"Term ID",tag:"{term_id}"},{label:"Term Post Count",tag:"{term_post_count}"},{label:"Query Results Count",tag:"{query_results_count}"}]},site:{label:"Site",tags:[{label:"Site Title",tag:"{site_title}"},{label:"Site Tagline",tag:"{site_tagline}"},{label:"Site URL",tag:"{site_url}"},{label:"Admin Email",tag:"{admin_email}"},{label:"WordPress Version",tag:"{wp_version}"},{label:"Current Date",tag:"{current_date}"},{label:"Current Time",tag:"{current_time}"}]},request:{label:"Request",tags:[{label:"Request Parameter",tag:"{request_parameter:your_key}"}]}});function DynamicDataModal({isOpen,onClose,onSelect}){const[allData]=useState(window.sdDynamicData);const[activeCategory,setActiveCategory]=useState(Object.keys(allData)[0]||"");const[searchTerm,setSearchTerm]=useState("");const filteredTags=useMemo(()=>{if(!allData[activeCategory])return[];const tags=allData[activeCategory].tags;if(!searchTerm)return tags;return tags.filter(item=>item.label.toLowerCase().includes(searchTerm.toLowerCase())||item.tag.toLowerCase().includes(searchTerm.toLowerCase()))},[allData,activeCategory,searchTerm]);const handleSelectAndClose=tag=>{onClose();onSelect(tag)};if(!isOpen)return null;const modalWithBackdrop=createElement(Fragment,null,createElement("div",{className:"modal-backdrop fade show",style:{zIndex:999990}}),createElement("div",{className:"bsui"},createElement("div",{className:"modal fade show",style:{display:"block",zIndex:999999},role:"dialog"},createElement("div",{className:"modal-dialog modal-xl"},createElement("div",{className:"modal-content",style:{height:"85vh",display:"flex",flexDirection:"column"}},createElement("div",{className:"modal-header"},createElement("h5",{className:"modal-title"},"Select Dynamic Data"),createElement("button",{type:"button",className:"btn-close",onClick:onClose})),createElement("div",{className:"modal-body",style:{flex:"1 1 auto",overflow:"hidden"}},createElement("div",{className:"row h-100"},createElement("div",{className:"col-md-3"},createElement("div",{className:"nav flex-column nav-pills"},Object.keys(allData).map(catKey=>createElement("button",{key:catKey,className:`nav-link text-start ${activeCategory===catKey?"active":""}`,onClick:()=>setActiveCategory(catKey)},allData[catKey].label)))),createElement("div",{className:"col-md-9 d-flex flex-column h-100"},createElement("input",{type:"text",className:"form-control mb-3 py-3",placeholder:"Search tagsâ€¦",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),createElement("div",{className:"flex-grow-1",style:{overflowY:"auto"}},createElement("div",{className:"list-group"},filteredTags.map(item=>createElement("button",{key:item.tag,type:"button",className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:()=>handleSelectAndClose(item.tag)},item.label,createElement("code",{style:{fontSize:"0.8em"}},item.tag)))))))))))));return createPortal(modalWithBackdrop,document.body)}function DynamicDataPicker(props){const[isModalOpen,useState]=wp.element.useState(false);const handleSelect=dataTag=>{if(props.onSelect){props.onSelect(dataTag)}};return createElement(Fragment,null,createElement("div",{style:{display:"inline-block"}},createElement("button",{onClick:()=>useState(true),type:"button",className:"components-button is-secondary is-compact",title:"Insert Dynamic Data"},createElement("i",{className:"fas fa-database"}))),isModalOpen&&createElement(DynamicDataModal,{isOpen:isModalOpen,onClose:()=>useState(false),onSelect:handleSelect}))}window.auiBlockTools=window.auiBlockTools||{};window.auiBlockTools.DynamicDataButton=DynamicDataPicker;window.auiBlockTools.DynamicDataModal=DynamicDataModal})(window.wp);